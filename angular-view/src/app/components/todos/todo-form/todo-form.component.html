<div *ngIf="!toggleEdit">
  <div mat-dialog-content>
    <h1 mat-dialog-title>{{ title.value }}</h1>
    <div>
      {{
        description.value
          ? description.value
          : "Clique em editar para adicionar uma descrição."
      }}
    </div>

    <br />
    <mat-card>
      <mat-card-title>
        <div class="list-title">
          <h3>Subtarefas</h3>
          <button
            (click)="toggleAddSubtodo()"
            color="primary"
            mat-icon-button
            class="add_icon"
            aria-label="Adicionar subtarefa"
          >
            <mat-icon>add_icon</mat-icon>
          </button>
        </div>
      </mat-card-title>

      <mat-card-subtitle>
        <p *ngIf="addSubtodo">
          Pressione Enter para adicionar (Esc para cancelar)
          <mat-form-field appearance="fill">
            <mat-label>Título</mat-label>
            <input
              #addSubTodoInput
              type="text"
              (keyup.esc)="toggleAddSubtodo()"
              (keyup.enter)="toggleAddSubtodo(); onEnter(addSubTodoInput.value);"
              autofocus
              matInput
              placeholder="Levar o cachorro para passear"
            />
          </mat-form-field>
        </p>
      </mat-card-subtitle>

      <mat-card-content>
        <mat-selection-list #subTodos>
          <div *ngFor="let subtodo of subtodos; let i = index">
            <div class="list-subtodo">
              <button
                (click)="onDeleteSubtodo(subtodo)"
                color="warn"
                mat-icon-button
                class="delete_forever"
                aria-label="Remover"
              >
                <mat-icon>delete_forever</mat-icon>
              </button>
              <mat-list-option (selectedChange)="onSelectedChange($event, i)" [selected]="subtodos[i].isDone">
                {{ subtodos[i].title }}
              </mat-list-option>
            </div>
          </div>
        </mat-selection-list>
      </mat-card-content>
    </mat-card>
  </div>

  <div mat-dialog-actions>
    <button mat-raised-button color="accent" (click)="toggleEdit = true">
      Editar
    </button>
    <button mat-raised-button color="warn" (click)="onDelete()">Remover</button>
  </div>
</div>

<div *ngIf="toggleEdit">
  <div mat-dialog-content>
    <h1 mat-dialog-title>Editando {{ title.value }}</h1>

    <p>
      <mat-form-field appearance="outline">
        <mat-label>Título</mat-label>
        <input
          [formControl]="title"
          matInput
          placeholder="Levar o cachorro para passear"
        />
      </mat-form-field>
    </p>

    <p>Descrição</p>
    <p class="todo-title-input">
      <mat-form-field appearance="outline">
        <mat-label>Descrição</mat-label>
        <textarea
          [formControl]="description"
          matInput
          placeholder="Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque"
        ></textarea>
      </mat-form-field>
    </p>

    <h3>Status</h3>
    <mat-button-toggle-group
      [formControl]="status"
      (change)="changeStatus(toggleBtn.value)"
      #toggleBtn="matButtonToggleGroup"
      name="favoriteColor"
      aria-label="Favorite Color"
    >
      <mat-button-toggle value="todo">Para fazer</mat-button-toggle>
      <mat-button-toggle value="progress">Em progresso</mat-button-toggle>
      <mat-button-toggle value="done">Concluído</mat-button-toggle>
    </mat-button-toggle-group>
  </div>
  <div mat-dialog-actions>
    <button
      mat-raised-button
      color="primary"
      cdkFocusInitial
      (click)="onSubmit()"
    >
      Ok
    </button>
    <button mat-raised-button color="accent" (click)="onCancel()">
      Cancelar
    </button>
  </div>
</div>
